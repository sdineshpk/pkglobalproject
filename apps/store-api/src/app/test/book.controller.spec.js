/* eslint-disable no-undef */

const request =require('supertest');
const app=require('../../app');

test('Error for wrong input',async ()=>{
    await request(app).get('/api/books/&655454tt')
    .expect('{"message":"Not found search result for requested value"}');
   
})
test('fetch list of book by name',async ()=>{
    const result=await request(app).get('/api/books/test');
    expect(result.status).toEqual(200);
    expect(result.text).toEqual("[{\"id\":\"X-5YBQAAQBAJ\",\"title\":\"The Test Book\",\"imageLink\":\"http://books.google.com/books/content?id=X-5YBQAAQBAJ&printsec=frontcover&img=1&zoom=1&edge=curl&source=gbs_api\",\"description\":\"This pocket-sized compendium of sixty four of the world's most useful tests is a vital tool for anyone looking to gauge their abilities and improve their performance. From intelligence to personality type via creativity and leadership skills, Krogerus and Tschppeler will help you see how you fare on every essential trait you need to succeed. Beyond your own abilities, The Test Book also provides sample diagnostic tests for your career, relationship and business, sketching out not just what your skills are but how well you're utilising them too. Some are old favourites - GMAT, MBTI, IQ, EQ - and many more are little-known tests with genuinely new insights. Every single one has been condensed to just a few pages, leading you to the quickest route to self-knowledge. With in-depth analysis of the history, strengths and weaknesses of each test and what your answers mean for you, The Test Book is the fastest and most entertaining way to equip yourself for happiness and success.\",\"authors\":[\"Mikael Krogerus\",\"Roman Tschäppeler\"],\"publisher\":\"Profile Books\",\"pageCount\":298,\"language\":\"en\"},{\"id\":\"C3fIJNPQfrsC\",\"title\":\"Cambridge Preparation for the TOEFL® Test Book with CD-ROM\",\"imageLink\":\"http://books.google.com/books/content?id=C3fIJNPQfrsC&printsec=frontcover&img=1&zoom=1&edge=curl&source=gbs_api\",\"description\":\"Provides test-taking strategies, skill-building exercises, sample essays and speaking responses, and practice tests.\",\"authors\":[\"Jolene Gear\",\"Robert Gear\"],\"ratingsCount\":3,\"publisher\":\"Cambridge University Press\",\"pageCount\":616,\"language\":\"en\"},{\"id\":\"3_1WDwAAQBAJ\",\"title\":\"The Astronaut Selection Test Book\",\"imageLink\":\"http://books.google.com/books/content?id=3_1WDwAAQBAJ&printsec=frontcover&img=1&zoom=1&edge=curl&source=gbs_api\",\"description\":\"_________________________ As featured in the Times, Daily Telegraph, BBC Radio 4 and BBC Breakfast ***The puzzle book of 2018*** Have YOU got what it takes to be an astronaut? This book will help readers of all ages find out. Featuring 100 real astronaut tests and exercises from the European Space Agency’s rigorous selection process, ranging from easy to fiendishly hard, The Astronaut Selection Test Book goes where no puzzle book has gone before. Including puzzles and tests on: · visual perception and logic · mental arithmetic and concentration · psychological readiness · teamwork and leadership · survival, physical and medical skills · foreign languages (every astronaut has to know Russian!) and much more, this richly illustrated book draws on Tim Peake's first-hand experience of applying to be an astronaut in 2008, when he and five others were chosen – out of over 8,000 applications! We’ve all dreamed of being an astronaut, though of the estimated 100 billion people who have ever lived, only 557 people have travelled to space. But with this unprecedented look into real astronaut selection, you might just find out your dreams can become reality... _________________________ HOUSTON, WE HAVE A PROBLEM SOLVER... _________________________ Tim Peake and the ESA will receive no royalties from this book; instead, they will be donated to the Prince's Trust charity.\",\"authors\":[\"Tim Peake\",\"The European Space Agency\"],\"publisher\":\"Random House\",\"pageCount\":256,\"language\":\"en\"},{\"id\":\"K9Q_vgAACAAJ\",\"title\":\"The Official Guide to the GRE General Test, Third Edition\",\"imageLink\":\"http://books.google.com/books/content?id=K9Q_vgAACAAJ&printsec=frontcover&img=1&zoom=1&source=gbs_api\",\"description\":\"Get the only official guide to the GRE® General Test that comes straight from the test makers! If you're looking for the best, most authoritative guide to the GRE General Test, you've found it! The Official Guide to the GRE General Test is the only GRE guide specially created by ETS--the people who actually make the test. It's packed with everything you need to do your best on the test--and move toward your graduate or business school degree. Only ETS can show you exactly what to expect on the test, tell you precisely how the test is scored, and give you hundreds of authentic test questions for practice! That makes this guide your most reliable and accurate source for everything you need to know about the GRE revised General Test. No other guide to the GRE General Test gives you all this: • Four complete, real tests--two in the book and two on CD-ROM • Hundreds of authentic test questions--so you can study with the real thing • In-depth descriptions of the Verbal Reasoning and Quantitative Reasoning measures plus valuable tips for answering each question type • Quantitative Reasoning problem-solving steps and strategies to help you get your best score • Detailed overview of the two types of Analytical Writing essay tasks including scored sample responses and actual raters' comments Everything you need to know about the test, straight from the test makers!\",\"authors\":[\"Educational Testing Service\"],\"publisher\":\"McGraw-Hill Education\",\"pageCount\":608,\"language\":\"en\"},{\"id\":\"YyoDiD5hcP0C\",\"title\":\"Polyester and Belted Tire Road Test Evaluations. Volume I of II. Final Report and Appendices I Through IV.\",\"imageLink\":\"http://books.google.com/books/content?id=YyoDiD5hcP0C&printsec=frontcover&img=1&zoom=1&source=gbs_api\",\"authors\":[\"James E. Dobbins\"],\"pageCount\":75,\"language\":\"en\"},{\"id\":\"BqLQAAAAMAAJ\",\"title\":\"Experimental Concept Formation Test for Preschool Deaf\",\"imageLink\":\"http://books.google.com/books/content?id=BqLQAAAAMAAJ&printsec=frontcover&img=1&zoom=1&source=gbs_api\",\"authors\":[\"Edgar L. Lowell\",\"Newton S. Metfessel\"],\"pageCount\":229,\"language\":\"en\"},{\"id\":\"KupkAAAAMAAJ\",\"title\":\"A Speech-threshold Test for Children\",\"imageLink\":\"http://books.google.com/books/content?id=KupkAAAAMAAJ&printsec=frontcover&img=1&zoom=1&source=gbs_api\",\"authors\":[\"Rin C. Steinhoff\"],\"pageCount\":362,\"language\":\"en\"},{\"id\":\"6V73HEh2N7AC\",\"title\":\"Interpreting Drinking Water Test Results\",\"imageLink\":\"http://books.google.com/books/content?id=6V73HEh2N7AC&printsec=frontcover&img=1&zoom=1&source=gbs_api\",\"authors\":[\"Christine Mechenich\",\"Elaine Andrews\"],\"pageCount\":12,\"language\":\"en\"},{\"id\":\"oXnVAAAAMAAJ\",\"title\":\"The Validity of the Slosson Intelligence Test for Children and Adults as a Predictor of Academic Achievement in Elementary Grades\",\"imageLink\":\"http://books.google.com/books/content?id=oXnVAAAAMAAJ&printsec=frontcover&img=1&zoom=1&source=gbs_api\",\"authors\":[\"Lynn La Follette Wallwork\"],\"pageCount\":210,\"language\":\"en\"},{\"id\":\"W0dOdZHB0-sC\",\"title\":\"Motorcycle Brake Test Procedure Validation. Summary Report. Final Report\",\"imageLink\":\"http://books.google.com/books/content?id=W0dOdZHB0-sC&printsec=frontcover&img=1&zoom=1&source=gbs_api\",\"authors\":[\"M. L. Love\"],\"pageCount\":13,\"language\":\"en\"}]");
})

test('Verify not found case by name',async ()=>{
    await request(app).get('/api/books/lazsdwddsdwedewdewd')
    .expect(400);
})